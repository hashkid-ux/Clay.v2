â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” ENVIRONMENT VARIABLES - QUICK REFERENCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ COPY-PASTE READY MINIMAL .env
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

NODE_ENV=production
PORT=8080

# Database (from Railway PostgreSQL plugin)
DATABASE_URL=postgresql://postgres:password@host:5432/railway

# Generate these with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=<64_hex_chars>
ENCRYPTION_KEY=<64_hex_chars>

# From: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxx
OPENAI_REALTIME_MODEL=gpt-4o-realtime-preview
OPENAI_MODEL=gpt-4-turbo
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=2000

# From: https://exotel.com â†’ Account Settings â†’ API Tokens
EXOTEL_SID=your-sid
EXOTEL_TOKEN=your-token
EXOTEL_WEBHOOK_SECRET=your-secret
EXOTEL_PHONE_NUMBER=+91xxxxxxxxxx

# Gmail: Generate app password from Google Account â†’ Security
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=<gmail_app_password>

# Your frontend domain
CORS_ORIGIN=https://app.caly.yourdomain.com

# From: https://wasabi.com â†’ Access Keys
WASABI_ENABLED=true
WASABI_ACCESS_KEY_ID=your-key
WASABI_SECRET_ACCESS_KEY=your-secret
WASABI_REGION=us-east-1
WASABI_BUCKET_NAME=caly-call-recordings
WASABI_ENDPOINT=https://s3.wasabisys.com
WASABI_PUBLIC_URL=https://caly-call-recordings.s3.wasabisys.com

# Your Railway backend URL
WEBHOOK_BASE_URL=https://calybackend-production.up.railway.app

# Optional
SHOPIFY_API_VERSION=2024-01
LOG_LEVEL=info

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ SETUP CHECKLIST (3 minutes)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£  Generate Keys (in terminal):
    node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
    (Run 2x for JWT_SECRET and ENCRYPTION_KEY)

2ï¸âƒ£  Copy .env file:
    cp Backend/.env.example Backend/.env

3ï¸âƒ£  Fill in .env with values from above

4ï¸âƒ£  Test encryption:
    npm install
    node Backend/scripts/test-encryption.js

5ï¸âƒ£  Initialize database:
    npm run init-db
    node Backend/scripts/init-wasabi-db.js

6ï¸âƒ£  Test server:
    npm run dev

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š ACTUAL VARIABLES USED IN CODE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TOTAL: 26 variables used
â”œâ”€ 18 critical (must have)
â”œâ”€ 5 optional (nice to have)
â””â”€ 47+ removed (not in code)

Before: 150 line .env.example (50+ variables) ğŸ—‘ï¸
After:  70 line .env.example (26 variables) âœ¨

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”’ ENCRYPTION DETAILS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

What's encrypted:
  âœ“ Shopify API secrets (stored in: clients.shopify_api_secret_encrypted)
  âœ“ Exotel tokens (stored in: clients.exotel_token_encrypted)
  
How it works:
  1. Client enters Shopify API secret during onboarding
  2. Backend: encrypt(secret) â†’ "iv:encrypted_hex"
  3. Database stores: "a1b2c3d4...f0:x1y2z3..."
  4. On retrieval: decrypt("a1b2c3d4...f0:x1y2z3...") â†’ secret
  5. Never stored plaintext âœ¨

Algorithm: AES-256-CBC (military-grade)
Key size: 256-bit (32 bytes = 64 hex chars)
IV: Random (16 bytes = 32 hex chars)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… WHAT'S BEEN DONE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Created: Backend/utils/encryption.js (AES-256 encryption)
âœ“ Updated: Backend/routes/onboarding.js (uses encryption module)
âœ“ Cleaned: Backend/.env.example (removed 50+ unused variables)
âœ“ Created: Backend/scripts/test-encryption.js (verification tool)
âœ“ Created: SECURITY_IMPLEMENTATION.txt (detailed guide)
âœ“ Created: This quick reference

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ DEPLOYMENT (Railway)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Go to: https://railway.app/dashboard
2. Click: Node.js service â†’ Variables
3. Add all 26 variables from copy-paste section above
4. Click: Settings â†’ Start Command
5. Set: npm run deploy
6. Click: Deploy button
7. Check logs: Deployments â†’ View Logs

That's it! ğŸ‰

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ› TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Error: "ENCRYPTION_KEY not set"
â†’ Add ENCRYPTION_KEY to .env (64 hex chars)

Error: "Decryption failed"
â†’ Run: node Backend/scripts/test-encryption.js
â†’ Check if encrypted data format is correct

Server won't start
â†’ Run: npm install
â†’ Check: NODE_ENV and PORT are set
â†’ Check: DATABASE_URL is valid

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ NEED HELP?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Test everything:
  node Backend/scripts/test-encryption.js
  npm run init-db
  npm run dev

Check logs:
  Backend/logs/app.log
  Railway console

Verify database:
  psql $DATABASE_URL -c "SELECT table_name FROM information_schema.tables WHERE table_schema='public';"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
